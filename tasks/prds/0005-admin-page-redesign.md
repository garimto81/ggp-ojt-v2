# PRD: Admin Page 재설계

**Version**: 1.0
**Date**: 2025-12-07
**Author**: Claude Code
**Status**: Draft
**Priority**: P1

---

## 1. 개요

### 1.1 배경
현재 AdminDashboard는 콘텐츠 관리 시 **미리보기 기능이 없어** 부적절한 콘텐츠를 삭제하려면 별도 화면에서 확인해야 하는 비효율적인 워크플로우를 가지고 있다. 이는 기획 단계에서의 UX 설계 미흡으로 인한 문제이다.

### 1.2 목적
- Split View 기반 콘텐츠 미리보기 도입
- 콘텐츠 상태 관리 시스템 구축 (draft → review → published → hidden)
- 신고 시스템 도입으로 부적절 콘텐츠 자동 감지
- 관리자 활동 로그 및 설정 탭 추가

### 1.3 범위
- AdminDashboard 전체 4개 탭 재설계
- DB 스키마 확장 (status, reports, logs)
- 신규 컴포넌트 10+ 개 생성

---

## 2. 대상 사용자

| 사용자 | 역할 | 주요 기능 |
|--------|------|----------|
| **Admin** | 전체 관리 | 사용자 관리, 콘텐츠 관리, 통계, 설정 |
| **Mentee** | 신고자 | 부적절 콘텐츠 신고 |

---

## 3. 핵심 기능

### 3.1 콘텐츠 관리 탭 재설계 (P0)

**문제**: 미리보기 없이 삭제 여부 판단 불가

**해결**:
- Split View 레이아웃 (40% 목록 + 60% 미리보기)
- 클릭 즉시 섹션/퀴즈 미리보기
- 상태별 탭 필터 (전체/검토대기/신고됨/숨김)
- Quick Actions (게시/숨기기/삭제)

**우선순위**: Critical
**예상 공수**: 3일

### 3.2 콘텐츠 상태 시스템 (P0)

**문제**: 삭제만 가능, 단계별 관리 불가

**해결**:
- 4단계 상태: draft → review → published → hidden
- 상태별 멘티 접근 제어
- 관리자 승인 워크플로우

**우선순위**: Critical
**예상 공수**: 1일 (DB + API)

### 3.3 신고 시스템 (P1)

**문제**: 부적절 콘텐츠 발견 수단 없음

**해결**:
- 멘티가 학습 중 신고 가능
- 신고 사유: 부적절/오래됨/중복/스팸/기타
- 3건 이상 신고 시 자동 숨김
- 관리자 신고 처리 (해결/기각)

**우선순위**: High
**예상 공수**: 2일

### 3.4 사용자 관리 탭 개선 (P2)

**문제**: 대량 작업 불편, 상세 정보 부족

**해결**:
- 체크박스 다중 선택 + 일괄 변경
- 사용자 상세 사이드 패널
- CSV/Excel 내보내기

**우선순위**: Medium
**예상 공수**: 2일

### 3.5 설정 탭 신규 (P2)

**문제**: 시스템 설정 변경 불가, 활동 추적 없음

**해결**:
- 시스템 설정 (기본 부서, 퀴즈 통과 점수 등)
- 알림 설정
- 관리자 활동 로그 뷰어

**우선순위**: Medium
**예상 공수**: 1일

### 3.6 통계 탭 개선 (P3)

**문제**: 리포트 내보내기 불가

**해결**:
- PDF/Excel/CSV 내보내기 버튼
- 차트 포함 스냅샷

**우선순위**: Low
**예상 공수**: 1일

---

## 4. 기술 요구사항

### 4.1 DB 스키마 변경

```sql
-- ojt_docs 테이블 확장
ALTER TABLE ojt_docs
  ADD COLUMN status TEXT DEFAULT 'published',
  ADD COLUMN report_count INTEGER DEFAULT 0,
  ADD COLUMN last_reviewed_at TIMESTAMPTZ,
  ADD COLUMN reviewed_by UUID;

-- 신규 테이블
CREATE TABLE content_reports (...);
CREATE TABLE admin_settings (...);
CREATE TABLE admin_logs (...);
```

### 4.2 신규 라이브러리

| 라이브러리 | 용도 | 크기 |
|-----------|------|------|
| `allotment` | Split View | ~15KB |
| `file-saver` | 파일 다운로드 | ~3KB |
| `xlsx` | Excel 내보내기 | ~200KB |
| `jspdf` | PDF 내보내기 | ~300KB |

### 4.3 컴포넌트 구조

```
features/admin/
├── components/
│   ├── users/       # 사용자 관리
│   ├── content/     # 콘텐츠 관리 (Split View)
│   ├── stats/       # 통계
│   └── settings/    # 설정 (신규)
├── hooks/
└── services/
```

### 4.4 접근성 요구사항

- WCAG 2.1 AA 준수 95%
- 키보드 네비게이션 완전 지원
- ARIA 속성 적용 (role, aria-label, aria-live)
- 색상 대비 4.5:1 이상

---

## 5. 비기능 요구사항

### 5.1 성능

| 지표 | 목표 |
|------|------|
| 콘텐츠 목록 로딩 | < 500ms |
| 미리보기 렌더링 | < 100ms |
| Split View 리사이즈 | 60fps |

### 5.2 보안

- Admin 역할 필수 검증
- 위험 작업 2단계 확인 (제목/이름 입력)
- 모든 활동 로그 기록

---

## 6. 성공 지표

| 지표 | 현재 | 목표 |
|------|------|------|
| 콘텐츠 확인 시간 | ~30초 | **~3초** |
| 부적절 콘텐츠 처리 | 수동 요청 | **자동 신고** |
| WCAG 준수율 | 70% | **95%** |
| Lighthouse 접근성 | 75점 | **95점** |

---

## 7. 구현 계획

| Phase | 작업 | 기간 | 산출물 |
|-------|------|------|--------|
| **1** | DB 마이그레이션 | 1일 | SQL 스크립트, RLS 정책 |
| **2** | 콘텐츠 관리 탭 | 3일 | Split View, 미리보기, 상태 관리 |
| **3** | 신고 시스템 | 2일 | 신고 API, 모달, 자동 숨김 |
| **4** | 사용자 관리 개선 | 2일 | 사이드 패널, 대량 작업 |
| **5** | 설정 탭 | 1일 | 설정 UI, 로그 뷰어 |
| **6** | 통계 내보내기 | 1일 | PDF/Excel 내보내기 |
| **7** | 테스트 | 2일 | E2E, 접근성 테스트 |

**총 예상 기간**: 12일

---

## 8. 의존성

### 8.1 선행 작업
- 없음 (독립 작업 가능)

### 8.2 연관 이슈
- Issue #54: Admin Analytics (완료)
- Issue #78: Admin CSRF/권한 검증 (완료)
- Issue #77: 접근성 개선 (완료)

---

## 9. 리스크

| 리스크 | 영향 | 완화 방안 |
|--------|------|----------|
| Split View 라이브러리 호환성 | 중간 | Allotment vs react-split 비교 테스트 |
| DB 마이그레이션 실패 | 높음 | 로컬 테스트 후 프로덕션 적용 |
| 내보내기 파일 크기 | 낮음 | 페이지네이션 또는 스트리밍 |

---

## 10. 참고 자료

- 상세 기획서: `docs/design/ADMIN_PAGE_SPECIFICATION.md`
- 콘텐츠 관리 설계: `docs/design/ADMIN_CONTENT_MANAGEMENT_REDESIGN.md`
- UI 목업: `docs/design/UI_MOCKUP_DESIGN.md`

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 1.0 | 2025-12-07 | 초안 작성 |
