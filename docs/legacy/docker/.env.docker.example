# ============================================================
# OJT Master - Local-Only Docker Environment (Issue #114)
# ============================================================
#
# 사용법:
#   1. cp .env.docker.example .env.docker
#   2. 값 수정 (특히 PGRST_JWT_SECRET, POSTGRES_PASSWORD)
#   3. docker-compose --env-file .env.docker up -d
#
# ============================================================

# ========================================
# PostgreSQL Database
# ========================================
POSTGRES_DB=ojt_master
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your-secure-password-here

# ========================================
# PostgREST (REST API)
# ========================================
# PostgreSQL 스키마
PGRST_DB_SCHEMAS=public

# 익명 사용자 Role
PGRST_DB_ANON_ROLE=anon

# JWT Secret (필수! 최소 32자 이상)
# 생성 방법: openssl rand -base64 32
PGRST_JWT_SECRET=your-jwt-secret-at-least-32-characters-long

# ========================================
# vLLM AI Server
# ========================================
# 외부 AI 서버 호스트
VLLM_HOST=10.10.100.209

# 사용할 AI 모델
VLLM_MODEL=Qwen/Qwen3-4B

# ========================================
# Frontend Environment (빌드 시 사용)
# ========================================
# 주의: 프론트엔드 빌드 전에 src-vite/.env에 설정 필요

# Local AI URL (nginx 프록시 사용)
# VITE_LOCAL_AI_URL=/api

# PostgreSQL REST API (nginx 프록시 사용)
# VITE_SUPABASE_URL=https://localhost:8443
# VITE_SUPABASE_ANON_KEY=<JWT token from PostgREST>

# 인증 모드 (Docker 사내 배포)
# VITE_AUTH_MODE=email

# ========================================
# SSL 인증서
# ========================================
# 자체 서명 인증서 생성 (개발용):
#   cd docker
#   mkdir -p ssl
#   openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
#     -keyout ssl/key.pem -out ssl/cert.pem \
#     -subj "/CN=localhost"
#
# Let's Encrypt 사용 (프로덕션):
#   certbot certonly --standalone -d your-domain.com
#   cp /etc/letsencrypt/live/your-domain.com/fullchain.pem docker/ssl/cert.pem
#   cp /etc/letsencrypt/live/your-domain.com/privkey.pem docker/ssl/key.pem

# ========================================
# 보안 권장사항
# ========================================
# 1. POSTGRES_PASSWORD: 강력한 비밀번호 사용 (최소 16자)
# 2. PGRST_JWT_SECRET: 무작위 생성 (openssl rand -base64 32)
# 3. SSL 인증서: 프로덕션에서는 Let's Encrypt 사용
# 4. 방화벽: 8443 포트만 외부 노출, 5432/3000은 내부망만
# 5. 정기 백업: postgres_data 볼륨 백업 설정

# ========================================
# 초기 사용자 생성 (선택)
# ========================================
# database/init/99_seed.sql에서 초기 Admin 계정 생성 가능
# 또는 수동으로 Supabase Dashboard에서 생성

# ========================================
# 모니터링 (선택)
# ========================================
# PostgreSQL 로그: docker logs ojt-postgres
# PostgREST 로그: docker logs ojt-postgrest
# Nginx 로그: docker logs ojt-nginx
# 또는: docker-compose logs -f
